/* ===========================
   Theme tokens
=========================== */
:root {
  --bg: #f5ecd9;
  /* 베이지 배경 */
  --card: #ffffff;
  /* 카드 배경 */
  --ink: #2e2e2e;
  /* 본문 텍스트 */
  --muted: #7a7a7a;
  /* 보조 텍스트 */
  --brand: #e8843c;
  /* 포인트 색 */
  --brand-weak: #f3c79f;
  /* 연한 포인트 */
  --stroke: #eadfcd;
  /* 테두리 */
}

/* 페이지 배경/기본 색 */
.results-container {
  background: var(--bg);
  color: var(--ink);
}

/* ===========================
   Scroll container (전체 화면 스크롤 주체)
=========================== */
.results-container.snap-container {
  position: relative;
  /* 배경 ::before 위해 */
  isolation: isolate;
  /* z-index 안전 */
  width: 100vw;
  max-width: none;
  margin: 0;
  padding: 0;
  box-sizing: border-box;

  height: 100dvh;
  /* 모바일 동적 뷰포트 */
  overflow-y: auto;
  /* 컨테이너가 스크롤 주체 */
  scroll-snap-type: none;
  /* CSS 스냅 끄고 JS로 제어 */
  scroll-behavior: auto;
  /* 속도는 JS로 제어 */
  scroll-padding-top: 0;

  background: transparent;
  /* 배경은 ::before로 */
}

/* 화면 뒤 고정 배경 (SVG) */
.results-container.snap-container::before {
  content: "";
  position: fixed;
  /* 뷰포트 기준 고정 */
  inset: 0;
  z-index: -1;
  pointer-events: none;
  margin-top: 15%;

  /* 가로=뷰포트, 세로=비율 유지 */
  background-color: var(--bg);
  background-image: var(--bg-img);
  background-position: center top;
  background-repeat: no-repeat;
  background-size: 100% auto;
}

/* 각 섹션은 한 화면 */
.snap-section {
  height: 100vh;
  scroll-snap-align: start;
  /* (현재 CSS 스냅은 off지만 유지 무방) */
  display: flex;
  align-items: stretch;
  justify-content: center;
  padding: 0;
}

/* ===========================
   Hero(탐색결과)
=========================== */
.hero-section .hero-wrap {
  width: 100%;
  max-width: 1120px;
  margin: 0 auto;
  padding: 32px 24px;
  text-align: center;
}

.hero-title {
  font-size: clamp(2.0rem, 3.6vw, 3.0rem);
  font-weight: 900;
  letter-spacing: -0.02em;
  margin: .25rem 0 .5rem;
}

.hero-sub {
  color: #9a9083;
  line-height: 1.45;
  font-size: 20px;
  font-weight: 700;
}

.hero-prompt {
  font-size: 30px;
}

/* 뒤로가기 버튼(상단 필요시) */
.back-button {
  padding: 10px 16px;
  border-radius: 10px;
  background: #e1b186;
  color: #fff;
  font-weight: 800;
  border: none;
  box-shadow: 0 3px 8px rgba(0, 0, 0, .07);
  cursor: pointer;
}

/* 히어로에서 숨기려면 주석 해제
.hero-section .back-button{ display:none !important; }
*/

/* ===========================
   브리핑 카드 + 지도
=========================== */
.briefing-card {
  margin: 18px auto 12px;
  background: var(--card);
  border: 1px solid var(--stroke);
  border-radius: 16px;
  display: grid;

  /* 왼쪽 유동, 오른쪽(지도) 220~340px */
  grid-template-columns: 1fr clamp(220px, 24vw, 340px);

  gap: 18px;
  padding: 14px 20px;
  /* 높이↓ */
  box-shadow: 0 4px 14px rgba(0, 0, 0, .07);
  max-width: 980px;
}

.briefing-title {
  text-align: left;
  font-size: 2rem;
  font-weight: 800;
  margin: .5rem 0 1rem;
}

.briefing-list {
  list-style: none;
  padding: 16px 16px;
  /* 항목 여유 */
  margin: 0;
  display: grid;
  gap: 15px;

  background: #f7efe2;
  /* 인셋 카드 느낌 */
  border: 1px solid var(--stroke);
  border-radius: 16px;
  box-shadow:
    0 4px 10px rgba(0, 0, 0, .06),
    inset 0 1px 0 rgba(255, 255, 255, .55);
}

.briefing-item {
  display: grid;
  grid-template-columns: 28px 1fr auto;
  /* 아이콘 / 라벨 / 건수 */
  align-items: center;
  gap: .5rem;
  background: #fff;
  border: 1px solid var(--stroke);
  border-radius: 14px;
  padding: 16px 18px;
  /* 항목 높이↑ */
  min-height: 56px;
}

.briefing-item img {
  width: 22px;
  height: 22px;
}

.briefing-item .label {
  color: #4a3d2c;
  font-weight: 800;
  font-size: 1.20rem;
}

.briefing-item .count {
  color: #2d261e;
  font-weight: 900;
  font-size: 1.50rem;
}

.briefing-map {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 10px;
}

/* 지도 이미지: 칼럼 폭/세로 상한 */
.briefing-map img {
  width: 100%;
  height: auto;
  max-width: 340px;
  max-height: 340px;
  opacity: .98;
  filter: drop-shadow(0 6px 12px rgba(0, 0, 0, .07));
}


/* ===========================
   아래로 스크롤 힌트
=========================== */
.scroll-hint {
  display: flex;
  flex-direction: column;
  /* 텍스트 위 / 화살표 아래 */
  align-items: center;
  justify-content: center;
  text-align: center;
  gap: 8px;
  margin: 18px auto 0;
  background: transparent;
  border: none;
  cursor: pointer;

  font-size: 1.5rem;
  /* 문구 크게 */
  font-weight: 700;
  color: #b1a496;
}

.scroll-hint img {
  width: 36px;
  height: 36px;
  /* 화살표 크게 */
  display: block;
  opacity: .95;
  transition: transform .15s ease;
}

.scroll-hint:hover img {
  transform: translateY(4px);
}

/* ===========================
   분석결과 섹션 (내부 스크롤)
=========================== */
.analysis-section {
  width: 100%;
}

.analysis-section .analysis-inner {
  width: 100%;
  max-width: 1120px;
  margin: 0 auto;
  padding: 24px 24px;

  display: flex;
  flex-direction: column;
  height: 100%;
  min-height: 0;
  /* flex overflow 방지 */
}

.analysis-title {
  font-size: 1.35rem;
  font-weight: 800;
  margin: .25rem 0 .6rem;
}

/* 탭 컨테이너: 세로 플렉스 */
.tabs-container {
  display: flex;
  flex-direction: column;
  height: 100%;
  min-height: 0;
}

/* 탭 헤더/버튼 */
.tabs-header {
  flex: 0 0 auto;
  background: rgba(255, 255, 255, .65);
  border: 1px solid var(--stroke);
  border-bottom: none;
  border-radius: 12px 12px 0 0;
  padding: 4px;
  display: flex;
  gap: 4px;
}

.tab-button {
  background: transparent;
  border: none;
  padding: .7rem 1.1rem;
  font-weight: 700;
  color: #6b5b45;
  border-radius: 10px;
  cursor: pointer;
}

.tab-button.active {
  background: #fff6ea;
  color: var(--brand);
  box-shadow: 0 2px 4px rgba(232, 132, 60, .15) inset;
  border: 1px solid var(--brand-weak);
}

/* 내부 스크롤 영역 */
.tab-content {
  flex: 1 1 auto;
  min-height: 0;
  overflow-y: auto;
  background: var(--card);
  border: 1px solid var(--stroke);
  border-top: none;
  border-radius: 0 0 12px 12px;
  padding: 20px;
  padding-bottom: max(24px, env(safe-area-inset-bottom));
  /* 하단 잘림 방지 */
  box-sizing: border-box;
  overscroll-behavior: contain;
  /* 부모로 이벤트 전파 방지 */
}

/* ===========================
   공통 카드/리스트
=========================== */
.summary-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: .9rem;
  margin: 1rem 0 1.2rem;
}

.summary-card {
  background: #fff7ee;
  border: 1px solid var(--stroke);
  border-radius: 12px;
  text-align: center;
  padding: 1rem .75rem;
}

.summary-card h3 {
  color: var(--brand);
  margin: 0 0 .25rem;
}

.summary-card p {
  margin: 0;
  color: #6b5b45;
  font-weight: 700;
}

.section-title {
  margin: .25rem 0 .75rem;
  font-weight: 800;
}

.section-subtitle {
  margin: .5rem 0 .5rem;
  font-weight: 800;
}

.data-list {
  margin-top: .5rem;
}

.data-item {
  background: #fff;
  border: 1px solid var(--stroke);
  border-radius: 12px;
  padding: 1rem;
  margin-bottom: .7rem;
}

.data-item h4 {
  margin: 0 0 .4rem;
}

.data-item p {
  margin: .2rem 0;
  color: #4a3d2c;
}

/* 상태 메시지 */
.no-data,
.error-state,
.loading-state {
  text-align: center;
  color: var(--muted);
  padding: 2rem 1rem;
}

.error-state {
  color: #c0392b;
}

/* ===========================
   반응형
=========================== */
@media (max-width: 900px) {
  .briefing-card {
    grid-template-columns: 1fr;
    /* 지도 아래로 */
    max-width: 640px;
  }

  .briefing-map img {
    max-width: 420px;
    max-height: 280px;
  }
}

/* ===========================
   Floating "New Chat" Button (우측 하단 고정)
=========================== */
.newchat-fab {
  position: fixed;
  right: clamp(16px, 2vw, 24px);
  bottom: max(16px, env(safe-area-inset-bottom));
  /* iOS 홈바 회피 */
  z-index: 9999;

  padding: 12px 18px;
  border-radius: 9999px;
  /* pill */
  border: 1px solid rgba(0, 0, 0, .06);
  background: #FF8D33;
  /* 요청 색상 */
  color: #fff;
  font-weight: 800;
  font-size: 0.95rem;
  letter-spacing: .2px;
  box-shadow: 0 8px 20px rgba(0, 0, 0, .12);
  cursor: pointer;
  transition: transform .12s ease, filter .12s ease, box-shadow .12s ease;
}

.newchat-fab:hover {
  filter: brightness(0.98);
  transform: translateY(-1px);
  box-shadow: 0 10px 22px rgba(0, 0, 0, .16);
}

.newchat-fab:active {
  transform: translateY(0);
  box-shadow: 0 6px 16px rgba(0, 0, 0, .12);
}

.newchat-fab:focus-visible {
  outline: 3px solid rgba(255, 141, 51, .45);
  outline-offset: 2px;
}

/* 부동산 탭: 실거래 목록 hover 효과 */
.properties-list .data-item {
  transition: transform .14s cubic-bezier(.22, .61, .36, 1),
    box-shadow .14s ease,
    border-color .14s ease,
    background-color .14s ease;
  will-change: transform;
  cursor: pointer;
  /* 손가락 커서 */
}

.properties-list .data-item:hover {
  transform: translateY(-2px) scale(1.015);
  /* 앞으로 툭 */
  box-shadow: 0 10px 24px rgba(0, 0, 0, .10);
  border-color: var(--brand-weak);
  background-color: #fff;
}

.properties-list .data-item:active {
  transform: translateY(0) scale(.997);
  box-shadow: 0 6px 16px rgba(0, 0, 0, .12);
}

.properties-list .data-item:focus-visible {
  outline: 3px solid rgba(232, 132, 60, .35);
  outline-offset: 2px;
}

/* 카카오맵 영역에서 스크롤 체이닝 방지 */
.kakao-map {
  overscroll-behavior: contain;
  /* wheel/touch 끝났을 때 부모로 안 퍼짐 */
}

/* ===== 분석결과 탭 크기 튜닝: 폰트↑, 박스↑ ===== */
.tabs-header {
  padding: 8px 8px;
  /* 4px → 8px */
  gap: 8px;
  /* 4px → 8px */
  border-radius: 14px 14px 0 0;
  /* 살짝 둥글게 */
}

.tab-button {
  font-size: 1.06rem;
  /* 기본보다 약간 ↑ */
  padding: 0.9rem 1.25rem;
  /* .7rem 1.1rem → 0.9rem 1.25rem */
  border-radius: 12px;
  /* 버튼 박스 조금 키움 */
  line-height: 1.15;
}

/* 활성 탭도 동일 비율로 커지게 */
.tab-button.active {
  /* 기존 스타일 유지 + 박스 커진 만큼 자연스럽게 */
  box-shadow: 0 2px 6px rgba(232, 132, 60, .18) inset;
}

/* 좁은 화면에서는 과도하게 커지지 않게 살짝 다운스케일 */
@media (max-width: 900px) {
  .tabs-header {
    padding: 6px;
    gap: 6px;
  }

  .tab-button {
    font-size: 1.0rem;
    padding: 0.8rem 1.1rem;
  }
}