/* ===========================
   Theme tokens
=========================== */
:root {
  --bg: #f5ecd9;
  /* 베이지 배경 */
  --card: #ffffff;
  /* 카드 배경 */
  --ink: #2e2e2e;
  /* 본문 텍스트 */
  --muted: #7a7a7a;
  /* 보조 텍스트 */
  --brand: #e8843c;
  /* 포인트 색 */
  --brand-weak: #f3c79f;
  /* 연한 포인트 */
  --stroke: #eadfcd;
  /* 테두리 */
}

/* 페이지 배경/기본 색 */
.results-container {
  background: var(--bg);
  color: var(--ink);
}

/* ===========================
   Scroll-snap 컨테이너(브라우저 전체)
   - 스크롤바를 오른쪽 끝으로 붙이기 위해
     가운데 정렬 레이아웃 제거
=========================== */
.results-container.snap-container {
  width: 100vw;
  max-width: none;
  margin: 0;
  padding: 0;
  box-sizing: border-box;

  height: 100dvh;
  /* 모바일 동적 뷰포트 대응 */
  overflow-y: auto;
  /* 컨테이너가 스크롤 주체 */
  scroll-snap-type: y none;
  scroll-behavior: auto;
  /* 속도는 JS로 제어 */
  scroll-padding-top: 0;
}

/* 각 섹션은 정확히 뷰포트 높이, 바깥 패딩 X */
.snap-section {
  height: 100vh;
  scroll-snap-align: start;
  display: flex;
  align-items: stretch;
  justify-content: center;
  padding: 0;
}

/* ===========================
   Hero(탐색결과) 섹션
=========================== */
.hero-section .hero-wrap {
  width: 100%;
  max-width: 1120px;
  margin: 0 auto;
  padding: 32px 24px;
  text-align: center;
}

.hero-title {
  font-size: clamp(2.0rem, 3.6vw, 3.0rem);
  font-weight: 900;
  letter-spacing: -0.02em;
  margin: .25rem 0 .5rem;
}

.hero-sub {
  color: #9a9083;
  line-height: 1.45;
  font-size: clamp(.95rem, 1.1vw, 1.15rem);
  font-weight: 700;
}

/* 뒤로가기 버튼(상단) */
.back-button {
  padding: 10px 16px;
  border-radius: 10px;
  background: #e1b186;
  color: #fff;
  font-weight: 800;
  border: none;
  box-shadow: 0 3px 8px rgba(0, 0, 0, .07);
  cursor: pointer;
}

/* ===========================
   브리핑 카드 + 지도
=========================== */
.briefing-card {
  margin: 18px auto 12px;
  background: var(--card);
  border: 1px solid var(--stroke);
  border-radius: 16px;
  display: grid;

  /* 왼쪽은 유동, 오른쪽(지도)은 220~340px 범위로 고정 */
  grid-template-columns: 1fr clamp(220px, 24vw, 340px);

  gap: 18px;
  padding: 18px 25px;
  box-shadow: 0 4px 14px rgba(0, 0, 0, .07);
  max-width: 980px;
}

.briefing-title {
  text-align: left;
  font-size: 2rem;
  font-weight: 800;
  margin: .5rem 0 1rem;
}

.briefing-list {
  list-style: none;
  padding: 14px;
  margin: 0;
  display: grid;
  gap: 15px;

  /* 인셋 카드 느낌 */
  background: #f7efe2;
  border: 1px solid var(--stroke);
  border-radius: 16px;
  box-shadow:
    0 4px 10px rgba(0, 0, 0, .06),
    inset 0 1px 0 rgba(255, 255, 255, .55);
}

.briefing-item {
  display: grid;
  grid-template-columns: 28px 1fr auto;
  /* 아이콘 / 라벨 / 건수 */
  align-items: center;
  gap: .5rem;
  background: #fff;
  border: 1px solid var(--stroke);
  border-radius: 12px;
  padding: 12px 14px;
}

.briefing-item img {
  width: 22px;
  height: 22px;
}

.briefing-item .label {
  color: #4a3d2c;
  font-weight: 800;
  font-size: 1.05rem;
}

.briefing-item .count {
  color: #2d261e;
  font-weight: 900;
  font-size: 1.25rem;
}

.briefing-map {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 10px;
}

/* 지도 이미지: 칼럼 폭을 절대 넘지 않도록 */
.briefing-map img {
  width: 100%;
  height: auto;
  max-width: 340px;
  opacity: .98;
  filter: drop-shadow(0 6px 12px rgba(0, 0, 0, .07));
}

/* 우선순위 강화(다른 규칙이 있었어도 이긴다) */
.hero-section .briefing-card .briefing-map img {
  max-width: 340px;
}

/* 스크롤 힌트 */
.scroll-hint {
  margin-top: 12px;
  display: inline-flex;
  gap: .5rem;
  align-items: center;
  background: transparent;
  border: none;
  color: #b1a496;
  font-weight: 600;
  font-size: 1rem;
  cursor: pointer;
}

.scroll-hint img {
  width: 28px;
  height: 28px;
  opacity: .9;
}

/* ===========================
   분석결과 섹션 (내부 스크롤)
=========================== */
.analysis-section {
  width: 100%;
}

.analysis-section .analysis-inner {
  width: 100%;
  max-width: 1120px;
  margin: 0 auto;
  padding: 24px 24px;

  display: flex;
  flex-direction: column;
  height: 100%;
  min-height: 0;
  /* flex overflow 방지 */
}

.analysis-title {
  font-size: 1.35rem;
  font-weight: 800;
  margin: .25rem 0 .6rem;
}

/* 탭 컨테이너: 세로 플렉스 */
.tabs-container {
  display: flex;
  flex-direction: column;
  height: 100%;
  min-height: 0;
}

/* 탭 헤더/버튼 (기존 구조 유지) */
.tabs-header {
  flex: 0 0 auto;
  background: rgba(255, 255, 255, .65);
  border: 1px solid var(--stroke);
  border-bottom: none;
  border-radius: 12px 12px 0 0;
  padding: 4px;
  display: flex;
  gap: 4px;
}

.tab-button {
  background: transparent;
  border: none;
  padding: .7rem 1.1rem;
  font-weight: 700;
  color: #6b5b45;
  border-radius: 10px;
  cursor: pointer;
}

.tab-button.active {
  background: #fff6ea;
  color: var(--brand);
  box-shadow: 0 2px 4px rgba(232, 132, 60, .15) inset;
  border: 1px solid var(--brand-weak);
}

/* 내부 스크롤 영역 */
.tab-content {
  flex: 1 1 auto;
  min-height: 0;
  overflow-y: auto;
  background: var(--card);
  border: 1px solid var(--stroke);
  border-top: none;
  border-radius: 0 0 12px 12px;
  padding: 20px;
  padding-bottom: max(24px, env(safe-area-inset-bottom));
  /* 하단 잘림 방지 */
  box-sizing: border-box;
  overscroll-behavior: contain;
  /* 부모 스냅으로 이벤트 전파 방지 */
}

/* ===========================
   요약/리스트 카드 공통 (기존 내용 유지)
=========================== */
.summary-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: .9rem;
  margin: 1rem 0 1.2rem;
}

.summary-card {
  background: #fff7ee;
  border: 1px solid var(--stroke);
  border-radius: 12px;
  text-align: center;
  padding: 1rem .75rem;
}

.summary-card h3 {
  color: var(--brand);
  margin: 0 0 .25rem;
}

.summary-card p {
  margin: 0;
  color: #6b5b45;
  font-weight: 700;
}

.section-title {
  margin: .25rem 0 .75rem;
  font-weight: 800;
}

.section-subtitle {
  margin: .5rem 0 .5rem;
  font-weight: 800;
}

.data-list {
  margin-top: .5rem;
}

.data-item {
  background: #fff;
  border: 1px solid var(--stroke);
  border-radius: 12px;
  padding: 1rem;
  margin-bottom: .7rem;
}

.data-item h4 {
  margin: 0 0 .4rem;
}

.data-item p {
  margin: .2rem 0;
  color: #4a3d2c;
}

/* 상태 메시지 */
.no-data,
.error-state,
.loading-state {
  text-align: center;
  color: var(--muted);
  padding: 2rem 1rem;
}

.error-state {
  color: #c0392b;
}

/* ===========================
   반응형
=========================== */

/* 좁은 화면에서는 카드 1열 배치로 전환 */
@media (max-width: 900px) {
  .briefing-card {
    grid-template-columns: 1fr;
    /* 지도 아래로 */
    max-width: 640px;
  }

  .briefing-map img {
    max-width: 420px;
  }
}

/* ===========================
   Floating "New Chat" Button (우측 하단 고정)
=========================== */
.newchat-fab {
  position: fixed;
  right: clamp(16px, 2vw, 24px);
  bottom: max(16px, env(safe-area-inset-bottom));
  /* iOS 홈바 회피 */
  z-index: 9999;

  padding: 12px 18px;
  border-radius: 9999px;
  /* 완전한 pill */
  border: 1px solid rgba(0, 0, 0, .06);
  background: #e1b186;
  /* 기존 톤과 맞춤 */
  color: #fff;
  font-weight: 800;
  font-size: 0.95rem;
  letter-spacing: .2px;
  box-shadow: 0 8px 20px rgba(0, 0, 0, .12);
  cursor: pointer;
  transition: transform .12s ease, filter .12s ease, box-shadow .12s ease;
}

.newchat-fab:hover {
  filter: brightness(0.98);
  transform: translateY(-1px);
  box-shadow: 0 10px 22px rgba(0, 0, 0, .16);
}

.newchat-fab:active {
  transform: translateY(0);
  box-shadow: 0 6px 16px rgba(0, 0, 0, .12);
}

.newchat-fab:focus-visible {
  outline: 3px solid rgba(225, 177, 134, .6);
  outline-offset: 2px;
}

/* (선택) 이전 상단 버튼이 남아있다면 히어로에서 숨김 */
.hero-section .back-button {
  display: none !important;
}

/* ========== Tuning: 브리핑 카드 높이↓, 항목 높이/폰트↑, 스크롤힌트/버튼 스타일 ========== */

/* 카드 자체 세로 여백을 줄여서 전체 높이 ↓ */
.briefing-card {
  padding: 14px 20px;
  /* 18px 22px → 14px 20px */
}

/* 지도 이미지가 카드 높이를 끌어올리지 않도록 최대 높이 제한 */
.briefing-map img {
  max-height: 340px;
  /* 세로 상한 추가 */
  width: auto;
  /* 세로 기준 맞추고 가로는 비율 유지 */
  max-width: 340px;
  /* 기존 상한 유지 */
}

/* 리스트 블록은 살짝 여유 */
.briefing-list {
  padding: 16px 16px;
  /* 14px 14px → 16px 16px */
}

/* 각 항목 세로 공간을 늘려서 터치/가독성↑ */
.briefing-item {
  padding: 16px 18px;
  /* 12px 14px → 16px 18px */
  min-height: 56px;
  /* 항목 높이 보장 */
  border-radius: 14px;
}

/* 항목 텍스트 크게 */
.briefing-item .label {
  font-size: 1.20rem;
  /* 1.05rem → 1.20rem */
  font-weight: 800;
}

.briefing-item .count {
  font-size: 1.50rem;
  /* 1.25rem → 1.50rem */
  font-weight: 900;
}

/* 아래 안내 문구 더 크고 또렷하게 */
.scroll-hint {
  font-size: 1.15rem;
  /* 1rem → 1.15rem */
  font-weight: 700;
  margin-top: 18px;
}

.scroll-hint img {
  width: 32px;
  /* 28 → 32 */
  height: 32px;
}

/* New Chat 버튼 색상 변경 (#FF8D33) */
.newchat-fab {
  background: #FF8D33;
  /* 기존 #e1b186 → #FF8D33 */
  border-color: rgba(0, 0, 0, .06);
  color: #fff;
}

.newchat-fab:hover {
  filter: brightness(0.98);
}

.newchat-fab:focus-visible {
  outline: 3px solid rgba(255, 141, 51, .45);
  outline-offset: 2px;
}